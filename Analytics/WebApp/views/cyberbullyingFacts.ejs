<html>
  <head>
   <link rel='stylesheet' href='/stylesheets/style.css' />
     <link href="css/bootstrap.min.css" rel="stylesheet">
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <!-- Custom CSS -->
    <link href="css/agency.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    
      <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
      <script type="text/javascript">


      google.charts.load("current", {packages:['table','corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {

          <% if(analysis_data != null) {
              console.log("********************");
              console.log(analysis_data[0]);
          }
          %>

          var data = google.visualization.arrayToDataTable([
              ['Sentence', 'Negative Score'],
                  <% for (var i=0; i<analysis_data.length; i++) {
                      console.log(analysis_data[i].sent_id,analysis_data[i].sent_negative*100) %>
              ['<%= analysis_data[i].sentence%>', <%=analysis_data[i].sent_negative*10%>],
              <% } %>
          ]);

          var data2 = new google.visualization.DataTable();
                      data2.addColumn('string','Sentence');
                      data2.addColumn('number', 'Negative Sentiment');
                      data2.addColumn('number', 'Positive Sentiment');
                      data2.addColumn('number', 'Polarity');
                      data2.addRows([
                              <% for (var i=0; i<analysis_data.length; i++) { %>
                              ['<%= analysis_data[i].sentence%>', <%=analysis_data[i].sent_negative%>,<%=analysis_data[i].sent_positive%>,
                                  <%=analysis_data[i].sent_polarity%>],
                              <% } %>

                         /* ['Mike',  {v: 10000, f: '$10,000'}, true],
                          ['Jim',   {v:8000,   f: '$8,000'},  false],
                          ['Alice', {v: 12500, f: '$12,500'}, true],
                          ['Bob',   {v: 7000,  f: '$7,000'},  true]*/
                      ]);
          var table = new google.visualization.Table(document.getElementById('table_div'));
          table.draw(data2, {showRowNumber: true, width: '100%', height: '100%'});

          var view = new google.visualization.DataView(data);
          view.setColumns([0, 1,
              { calc: "stringify",
                  sourceColumn: 1,
                  type: "string",
                  role: "annotation" }]);

        var options = {
            title: 'Cyberbullying Analysis' ,
            width: 900,
            height: 400,
            bar: {groupWidth: "85%"},
            legend: { position: "none" },
            vAxis: {title: 'Sentence',  titleTextStyle: {color: 'black',size:'10'}},
            hAxis: {title: 'Negative Score',  titleTextStyle: {color: 'black',size:'10'}},
        };

          var chart = new google.visualization.ColumnChart(document.getElementById("chart_div1"));
          chart.draw(view, options);
      }
    </script>
  </head>
  <body>
  <div>
      <%- include header.ejs %>
  </div><br><br><br>
    <div id="chart_div1" style="width: 1500px; height: 300px;"></div>
  <br><br><br><br><br><br><br><br><br><br><br>
  <div id="table_div" style="width: 750px; height: 600px;"></div>
  <br><br><br><br>
  <div>
      <%- include footer.ejs %>
  </div>
  </body>

</html>